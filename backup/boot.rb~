require 'rubygems'
ENV['LOGBRIDGE_ENV'] ||= 'development'

# Set up gems listed in the Gemfile.
gemfile = File.expand_path('../../Gemfile', __FILE__)
begin
  ENV['BUNDLE_GEMFILE'] = gemfile
  require 'bundler'
  Bundler.setup
  Bundler.require(:default, ENV['LOGBRIDGE_ENV']) if defined?(Bundler)
rescue Bundler::GemNotFound => e
  STDERR.puts e.message
  STDERR.puts "Try running `bundle install`."
  exit!
end if File.exist?(gemfile)

require File.expand_path('../../lib/configuration', __FILE__)
Configuration.load(:config_dir => File.expand_path('../', __FILE__), :environment => ENV['LOGBRIDGE_ENV'])
