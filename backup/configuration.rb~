require 'yaml'

class Configuration
  @@config
  @@environment

  def self.load(args)
    @@config = {}
    @@environment = args[:environment]
    unless args[:config_dir].nil? || args[:environment].nil?
      Dir.glob("#{args[:config_dir]}/*.yml").each do |config_file|
        @@config[File.basename(config_file, ".yml")] = YAML.load_file(config_file)[args[:environment]]
      end
    end
    return self
  end

  def self.method_missing(name, *args, &block)
    @@config[name.to_s]
  end

  #def self.environment
  #  @@environment
  #end

end
